<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Libinput bindings for rust"><meta name="keywords" content="rust, rustlang, rust-lang, input"><title>input - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../input/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><h2 class="location">Crate input</h2><div class="block version"><div class="narrow-helper"></div><p>Version 0.7.0</p></div><div class="sidebar-elems"><a id="all-types" href="all.html"><p>See all input's items</p></a><div class="block items"><ul><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li><li><a href="#types">Type Definitions</a></li></ul></div><div id="sidebar-vars" data-name="input" data-ty="mod" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">input</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/input/lib.rs.html#1-237" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="libinput-bindings-for-rust" class="section-header"><a href="#libinput-bindings-for-rust">Libinput bindings for rust</a></h2>
<p>These bindings closely follow libinput’s concepts and it’s original API.
Please refer to the <a href="https://wayland.freedesktop.org/libinput/doc/latest/">libinput documentation</a>
to understand the general structure and concepts.</p>
<h3 id="differences-to-the-c-library" class="section-header"><a href="#differences-to-the-c-library">Differences to the C-Library:</a></h3>
<ul>
<li>Refcounting does not need to be done manually. Just call <code>clone</code> when you need an additional reference.</li>
<li>Libinput logging cannot (currently) not be customized.</li>
</ul>
<h3 id="userdata-handling" class="section-header"><a href="#userdata-handling">Userdata handling</a></h3>
<p>Multiple types in the libinput library allow to attach a pointer of an arbitrary type, so called <code>userdata</code>.
Using this data is unsafe as there is no way to find out what type is stored in the libinput struct.
Additionally multiple references to the same libinput object may exist and userdata may be shared mutably.</p>
<p>This is why using and setting userdata is an unsafe operation (except when creating an object).</p>
<p>If you heavily rely on userdata, you should always stored them wrapped in a <code>Mutex</code> and use the same
type for every userdata access to further simplify usage.</p>
<p>You need to be especially cautious when initializing libinput types from raw pointers, you obtained
from other libraries which may set their own userdata. If accessing their userdata make sure no shared
mutable access may happen and don’t store something else instead, if the library does not explicitly
allow this.</p>
<p>Generally usage of this api is error-prone and discouraged if not needed.</p>
<h3 id="getting-started" class="section-header"><a href="#getting-started">Getting started</a></h3>
<p>To get started check out the <a href="./struct.Libinput.html"><code>Libinput</code> struct</a>.</p>
<p>Here’s a small example that prints all events:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">input</span>::{<span class="ident">Libinput</span>, <span class="ident">LibinputInterface</span>};
<span class="kw">use</span> <span class="ident">std::fs</span>::{<span class="ident">File</span>, <span class="ident">OpenOptions</span>};
<span class="kw">use</span> <span class="ident">std::os::unix</span>::{<span class="ident">fs::OpenOptionsExt</span>, <span class="ident">io</span>::{<span class="ident">RawFd</span>, <span class="ident">FromRawFd</span>, <span class="ident">IntoRawFd</span>}};
<span class="kw">use</span> <span class="ident">std::path::Path</span>;

<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">libc</span>;
<span class="kw">use</span> <span class="ident">libc</span>::{<span class="ident">O_RDONLY</span>, <span class="ident">O_RDWR</span>, <span class="ident">O_WRONLY</span>};

<span class="kw">struct</span> <span class="ident">Interface</span>;

<span class="kw">impl</span> <span class="ident">LibinputInterface</span> <span class="kw">for</span> <span class="ident">Interface</span> {
    <span class="kw">fn</span> <span class="ident">open_restricted</span>(<span class="kw-2">&amp;mut</span> <span class="self">self</span>, <span class="ident">path</span>: <span class="kw-2">&amp;</span><span class="ident">Path</span>, <span class="ident">flags</span>: <span class="ident">i32</span>) -&gt; <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">RawFd</span>, <span class="ident">i32</span><span class="op">&gt;</span> {
        <span class="ident">OpenOptions::new</span>()
            .<span class="ident">custom_flags</span>(<span class="ident">flags</span>)
            .<span class="ident">read</span>((<span class="ident">flags</span> <span class="op">&amp;</span> <span class="ident">O_RDONLY</span> <span class="op">!</span><span class="op">=</span> <span class="number">0</span>) <span class="op">|</span> (<span class="ident">flags</span> <span class="op">&amp;</span> <span class="ident">O_RDWR</span> <span class="op">!</span><span class="op">=</span> <span class="number">0</span>))
            .<span class="ident">write</span>((<span class="ident">flags</span> <span class="op">&amp;</span> <span class="ident">O_WRONLY</span> <span class="op">!</span><span class="op">=</span> <span class="number">0</span>) <span class="op">|</span> (<span class="ident">flags</span> <span class="op">&amp;</span> <span class="ident">O_RDWR</span> <span class="op">!</span><span class="op">=</span> <span class="number">0</span>))
            .<span class="ident">open</span>(<span class="ident">path</span>)
            .<span class="ident">map</span>(<span class="op">|</span><span class="ident">file</span><span class="op">|</span> <span class="ident">file</span>.<span class="ident">into_raw_fd</span>())
            .<span class="ident">map_err</span>(<span class="op">|</span><span class="ident">err</span><span class="op">|</span> <span class="ident">err</span>.<span class="ident">raw_os_error</span>().<span class="ident">unwrap</span>())
    }
    <span class="kw">fn</span> <span class="ident">close_restricted</span>(<span class="kw-2">&amp;mut</span> <span class="self">self</span>, <span class="ident">fd</span>: <span class="ident">RawFd</span>) {
        <span class="kw">unsafe</span> {
            <span class="ident">File::from_raw_fd</span>(<span class="ident">fd</span>);
        }
    }
}

<span class="kw">fn</span> <span class="ident">main</span>() {
    <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">input</span> <span class="op">=</span> <span class="ident">Libinput::new_with_udev</span>(<span class="ident">Interface</span>);
    <span class="ident">input</span>.<span class="ident">udev_assign_seat</span>(<span class="string">&quot;seat0&quot;</span>).<span class="ident">unwrap</span>();
    <span class="kw">loop</span> {
        <span class="ident">input</span>.<span class="ident">dispatch</span>().<span class="ident">unwrap</span>();
        <span class="kw">for</span> <span class="ident">event</span> <span class="kw">in</span> <span class="kw-2">&amp;mut</span> <span class="ident">input</span> {
            <span class="macro">println!</span>(<span class="string">&quot;Got event: {:?}&quot;</span>, <span class="ident">event</span>);
        }
    }
}</code></pre></div>
</div></details><h2 id="reexports" class="section-header"><a href="#reexports">Re-exports</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left import-item"><code>pub use event::<a class="enum" href="event/enum.Event.html" title="enum input::event::Event">Event</a>;</code></div><div class="item-right docblock-short"></div></div></div><h2 id="modules" class="section-header"><a href="#modules">Modules</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="event/index.html" title="input::event mod">event</a></div><div class="item-right docblock-short"><p>Libinput Events</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="ffi/index.html" title="input::ffi mod">ffi</a></div><div class="item-right docblock-short"><p>Unsafe raw C API.</p>
</div></div></div><h2 id="structs" class="section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Device.html" title="input::Device struct">Device</a></div><div class="item-right docblock-short"><p>Representation of a single input device as seen by the kernel.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.DeviceGroup.html" title="input::DeviceGroup struct">DeviceGroup</a></div><div class="item-right docblock-short"><p>Device group</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Led.html" title="input::Led struct">Led</a></div><div class="item-right docblock-short"><p>Mask reflecting LEDs on a device.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Libinput.html" title="input::Libinput struct">Libinput</a></div><div class="item-right docblock-short"><p>Libinput context</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Seat.html" title="input::Seat struct">Seat</a></div><div class="item-right docblock-short"><p>A seat has two identifiers, the physical name and the logical name.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.SendEventsMode.html" title="input::SendEventsMode struct">SendEventsMode</a></div><div class="item-right docblock-short"><p>The send-event mode of a device defines when a device may generate
events and pass those events to the caller.</p>
</div></div></div><h2 id="enums" class="section-header"><a href="#enums">Enums</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.AccelProfile.html" title="input::AccelProfile enum">AccelProfile</a></div><div class="item-right docblock-short"><p>Pointer Acceleration Profile</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.ClickMethod.html" title="input::ClickMethod enum">ClickMethod</a></div><div class="item-right docblock-short"><p>The click method defines when to generate software-emulated
buttons, usually on a device that does not have a specific
physical button available.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.DeviceCapability.html" title="input::DeviceCapability enum">DeviceCapability</a></div><div class="item-right docblock-short"><p>Capabilities on a device.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.DeviceConfigError.html" title="input::DeviceConfigError enum">DeviceConfigError</a></div><div class="item-right docblock-short"><p>Errors returned when applying configuration settings.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.ScrollMethod.html" title="input::ScrollMethod enum">ScrollMethod</a></div><div class="item-right docblock-short"><p>The scroll method of a device selects when to generate scroll axis
events instead of pointer motion events.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.TapButtonMap.html" title="input::TapButtonMap enum">TapButtonMap</a></div><div class="item-right docblock-short"><p>Map 1/2/3 finger tips to buttons</p>
</div></div></div><h2 id="traits" class="section-header"><a href="#traits">Traits</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.AsRaw.html" title="input::AsRaw trait">AsRaw</a></div><div class="item-right docblock-short"><p>Trait for types that allow to optain the underlying raw libinput pointer.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.Context.html" title="input::Context trait">Context</a></div><div class="item-right docblock-short"><p>Trait to receive the underlying context</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.FromRaw.html" title="input::FromRaw trait">FromRaw</a></div><div class="item-right docblock-short"><p>Trait for types that allow to be initialized from a raw pointer</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.LibinputInterface.html" title="input::LibinputInterface trait">LibinputInterface</a></div><div class="item-right docblock-short"><p>libinput does not open file descriptors to devices directly,
instead <code>open_restricted</code> and <code>close_restricted</code> are called for
each path that must be opened.</p>
</div></div></div><h2 id="types" class="section-header"><a href="#types">Type Definitions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="type" href="type.DeviceConfigResult.html" title="input::DeviceConfigResult type">DeviceConfigResult</a></div><div class="item-right docblock-short"><p>Result returned when applying configuration settings.</p>
</div></div></div></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../" data-current-crate="input" data-search-index-js="../search-index.js" data-search-js="../search.js"></div>
    <script src="../main.js"></script>
</body></html>