<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `init_data_device` fn in crate `smithay`."><meta name="keywords" content="rust, rustlang, rust-lang, init_data_device"><title>smithay::wayland::data_device::init_data_device - Rust</title><link rel="stylesheet" type="text/css" href="../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../../ayu.css" disabled ><script src="../../../storage.js"></script><noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="shortcut icon" href="../../../favicon.ico"><style type="text/css">#crate-search{background-image:url("../../../down-arrow.svg");}</style></head><body class="rustdoc fn"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../../smithay/index.html'><div class='logo-container'><img src='../../../rust-logo.png' alt='logo'></div></a><div class="sidebar-elems"><p class='location'><a href='../../index.html'>smithay</a>::<wbr><a href='../index.html'>wayland</a>::<wbr><a href='index.html'>data_device</a></p><script>window.sidebarCurrent = {name: 'init_data_device', ty: 'fn', relpath: ''};</script><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../../../settings.html"><img src="../../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../../../src/smithay/wayland/data_device/mod.rs.html#276-298' title='goto source code'>[src]</a></span><span class='in-band'>Function <a href='../../index.html'>smithay</a>::<wbr><a href='../index.html'>wayland</a>::<wbr><a href='index.html'>data_device</a>::<wbr><a class="fn" href=''>init_data_device</a></span></h1><pre class='rust fn'>pub fn init_data_device&lt;F, C, R, L&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;display: &amp;mut <a class="struct" href="../../../wayland_server/display/struct.Display.html" title="struct wayland_server::display::Display">Display</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;callback: C, <br>&nbsp;&nbsp;&nbsp;&nbsp;action_choice: F, <br>&nbsp;&nbsp;&nbsp;&nbsp;token: <a class="struct" href="../../../smithay/wayland/compositor/struct.CompositorToken.html" title="struct smithay::wayland::compositor::CompositorToken">CompositorToken</a>&lt;R&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;logger: L<br>) -&gt; <a class="struct" href="../../../wayland_server/globals/struct.Global.html" title="struct wayland_server::globals::Global">Global</a>&lt;<a class="struct" href="../../../wayland_server/protocol/wl_data_device_manager/struct.WlDataDeviceManager.html" title="struct wayland_server::protocol::wl_data_device_manager::WlDataDeviceManager">WlDataDeviceManager</a>&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(<a class="struct" href="../../../wayland_server/protocol/wl_data_device_manager/struct.DndAction.html" title="struct wayland_server::protocol::wl_data_device_manager::DndAction">DndAction</a>, <a class="struct" href="../../../wayland_server/protocol/wl_data_device_manager/struct.DndAction.html" title="struct wayland_server::protocol::wl_data_device_manager::DndAction">DndAction</a>) -&gt; <a class="struct" href="../../../wayland_server/protocol/wl_data_device_manager/struct.DndAction.html" title="struct wayland_server::protocol::wl_data_device_manager::DndAction">DndAction</a> + 'static,<br>&nbsp;&nbsp;&nbsp;&nbsp;C: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(<a class="enum" href="../../../smithay/wayland/data_device/enum.DataDeviceEvent.html" title="enum smithay::wayland::data_device::DataDeviceEvent">DataDeviceEvent</a>) + 'static,<br>&nbsp;&nbsp;&nbsp;&nbsp;R: <a class="trait" href="../../../smithay/wayland/compositor/roles/trait.Role.html" title="trait smithay::wayland::compositor::roles::Role">Role</a>&lt;<a class="struct" href="../../../smithay/wayland/data_device/struct.DnDIconRole.html" title="struct smithay::wayland::data_device::DnDIconRole">DnDIconRole</a>&gt; + 'static,<br>&nbsp;&nbsp;&nbsp;&nbsp;L: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../../slog/struct.Logger.html" title="struct slog::Logger">Logger</a>&gt;&gt;,&nbsp;</span></pre><div class='docblock'><p>Initialize the data device global</p>
<p>You can provide a callback to peek into the actions of your clients over the data devices
(allowing you to retrieve the current selection buffer, or intercept DnD data). See the
<a href="../../../smithay/wayland/data_device/enum.DataDeviceEvent.html" title="`DataDeviceEvent`"><code>DataDeviceEvent</code></a> type for details about what notifications you can receive. Note that this
closure will not receive notifications about dnd actions the compositor initiated, see
<a href="../../../smithay/wayland/data_device/fn.start_dnd.html" title="`start_dnd`"><code>start_dnd</code></a> for details about that.</p>
<p>You also need to provide a <code>(DndAction, DndAction) -&gt; DndAction</code> closure that will arbitrate
the choice of action resulting from a drag'n'drop session. Its first argument is the set of
available actions (which is the intersection of the actions supported by the source and targets)
and the second argument is the preferred action reported by the target. If no action should be
chosen (and thus the drag'n'drop should abort on drop), return
<a href="../../../wayland_server/protocol/wl_data_device_manager/struct.DndAction.html#method.empty"><code>DndAction::empty()</code></a>.</p>
</div></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../../../";window.currentCrate = "smithay";</script><script src="../../../main.js"></script><script defer src="../../../search-index.js"></script></body></html>