<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Backend (rendering&#x2F;input) helpers"><meta name="keywords" content="rust, rustlang, rust-lang, backend"><title>smithay::backend - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled ><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../../smithay/index.html'><div class='logo-container rust-logo'><img src='../../rust-logo.png' alt='logo'></div></a><h2 class="location">Module backend</h2><div class="sidebar-elems"><div class="block items"><ul><li><a href="#modules">Modules</a></li><li><a href="#enums">Enums</a></li></ul></div><div id="sidebar-vars" data-name="backend" data-ty="mod" data-relpath="./"></div><script defer src="./sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Module <a href="../index.html">smithay</a>::<wbr><a class="mod" href="#">backend</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../src/smithay/backend/mod.rs.html#1-130" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Backend (rendering/input) helpers</p>
<p>This module provides helpers for interaction with the operating system.</p>
<h3 id="module-structure" class="section-header"><a href="#module-structure">Module structure</a></h3>
<p>The module is largely structured around three main aspects of interaction with the OS:
session management, input handling, and graphics.</p>
<h4 id="session-management" class="section-header"><a href="#session-management">Session management</a></h4>
<p>Session management relates to mechanisms allowing the compositor to access the resources
it needs to function. It contains interaction with the login manager if any ((e)logind or
seatd), as well as releasing those resources when TTY-switching. It is handled by the
<a href="session/index.html" title="session"><code>session</code></a> module, gated by the <code>backend_session</code> cargo feature. You will generally need
it to run your compositor directly on a TTY.</p>
<p>This module is tightly coupled with the <a href="udev/index.html" title="udev"><code>udev</code></a> module (gated by the <code>backend_udev</code> cargo
feature), which allows the discovery of usable graphics and input devices on the system, using
the udev system daemon.</p>
<h4 id="input-handling" class="section-header"><a href="#input-handling">Input handling</a></h4>
<p>Input handling consists in discovering the various available input devices, and receiving
all inputs events from it. Smithay is build to support different possible sources for
that input data, with a generic API provided by the traits and types defined in the
<a href="input/index.html" title="input"><code>input</code></a> module. An input provider following this API based on <code>libinput</code> is given in the
<a href="libinput/index.html" title="libinput"><code>libinput</code></a> module, gated by the <code>backend_libinput</code> cargo feature. The winit backend
(see below) also provides an input provider.</p>
<h4 id="graphics" class="section-header"><a href="#graphics">Graphics</a></h4>
<p>Combining content from the clients and displaying it on the screen is the central role of
a wayland compositor, and also one of its most complex tasks; several backend modules are
dedicated to this task.</p>
<p>Smithay provides a rendering infrastructure built around graphics buffers: you retrieve buffers
for your client, you composite them into a new buffer holding the contents of your desktop,
that you will then submit to the hardware for display. The backbone of this infrastructure is
structured around the <a href="allocator/index.html" title="allocator"><code>allocator</code></a> and <a href="renderer/index.html" title="renderer"><code>renderer</code></a> modules. The first one contains generic
traits representing the capability to allocate and convert graphical buffers, as well as an
implementation of this capability using GBM (see its module-level docs for details). The second
provides traits representing the capability of graphics rendering using those buffers, as well
as an implementation of this capability using GLes2 (see its module-level docs for details).</p>
<p>Alongside this backbone capability, Smithay also provides the <a href="drm/index.html" title="drm"><code>drm</code></a> module, which handles
direct interaction with the graphical physical devices to setup the display pipeline and
submit rendered buffers to the monitors for display. This module is gated by the
<code>backend_drm</code> cargo feature.</p>
<p>The <a href="egl/index.html" title="egl"><code>egl</code></a> module provides the logic to setup an OpenGL context. It is used by the Gles2
renderer (which is based on OpenGL), and also provides the capability for clients to use
the <code>wl_drm</code>-based hardware-acceleration provided by Mesa, a precursor to the
<a href="../wayland/dmabuf/index.html"><code>linux_dmabuf</code></a> Wayland protocol extension. Note that, at the
moment, even clients using dma-buf still require that the <code>wl_drm</code> infrastructure is
initialized to have hardware-acceleration.</p>
<h3 id="x11-backend" class="section-header"><a href="#x11-backend">X11 backend</a></h3>
<p>Alongside this infrastructure, Smithay also provides an alternative backend based on
<a href="https://crates.io/crates/x11rb">x11rb</a>, which makes it possible to run your compositor as
an X11 client. This is generally quite helpful for development and debugging.</p>
<p>The X11 backend does not concern itself with what renderer is in use, allowing presentation to
the window assuming you can provide it with a <a href="allocator/dmabuf/struct.Dmabuf.html"><code>Dmabuf</code></a>.
The X11 backend is also an input provider, and is accessible in the <a href="x11/index.html" title="x11"><code>x11</code></a> module, gated by
the <code>backend_x11</code> cargo feature.</p>
<h3 id="winit-backend" class="section-header"><a href="#winit-backend">Winit backend</a></h3>
<p>Alongside this infrastructure, Smithay also provides an alternative backend based on
<a href="https://crates.io/crates/winit">winit</a>, which makes it possible to run your compositor as
a Wayland or X11 client. You are encouraged to use the X11 backend where possible since winit
does not integrate into calloop too well. This backend is generally quite helpful for
development and debugging. That backend is both a renderer and an input provider, and is
accessible in the <a href="winit/index.html" title="winit"><code>winit</code></a> module, gated by the <code>backend_winit</code> cargo feature.</p>
</div></details><h2 id="modules" class="section-header"><a href="#modules">Modules</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="allocator/index.html" title="smithay::backend::allocator mod">allocator</a></div><div class="item-right docblock-short"><p>Buffer allocation and management.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="drm/index.html" title="smithay::backend::drm mod">drm</a></div><div class="item-right docblock-short"><p>This module represents abstraction on top the linux direct rendering manager api (drm).</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="egl/index.html" title="smithay::backend::egl mod">egl</a></div><div class="item-right docblock-short"><p>Common traits and types for egl rendering</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="input/index.html" title="smithay::backend::input mod">input</a></div><div class="item-right docblock-short"><p>Common traits for input backends to receive input from.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="libinput/index.html" title="smithay::backend::libinput mod">libinput</a></div><div class="item-right docblock-short"><p>Implementation of input backend trait for types provided by <code>libinput</code></p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="renderer/index.html" title="smithay::backend::renderer mod">renderer</a></div><div class="item-right docblock-short"><p>Rendering functionality and abstractions</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="session/index.html" title="smithay::backend::session mod">session</a></div><div class="item-right docblock-short"><p>Abstraction of different session APIs.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="udev/index.html" title="smithay::backend::udev mod">udev</a></div><div class="item-right docblock-short"><p><code>udev</code> related functionality for automated device scanning</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="winit/index.html" title="smithay::backend::winit mod">winit</a></div><div class="item-right docblock-short"><p>Implementation of backend traits for types provided by <code>winit</code></p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="x11/index.html" title="smithay::backend::x11 mod">x11</a></div><div class="item-right docblock-short"><p>Implementation of the backend types using X11.</p>
</div></div></div><h2 id="enums" class="section-header"><a href="#enums">Enums</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.SwapBuffersError.html" title="smithay::backend::SwapBuffersError enum">SwapBuffersError</a></div><div class="item-right docblock-short"><p>Error that can happen when swapping buffers.</p>
</div></div></div></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../../" data-current-crate="smithay" data-search-index-js="../../search-index.js" data-search-js="../../search.js"></div>
    <script src="../../main.js"></script>
</body></html>