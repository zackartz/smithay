<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Cookies are handles to future replies or errors from the X11 server."><meta name="keywords" content="rust, rustlang, rust-lang, cookie"><title>x11rb::cookie - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled ><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../../x11rb/index.html'><div class='logo-container rust-logo'><img src='../../rust-logo.png' alt='logo'></div></a><h2 class="location">Module cookie</h2><div class="sidebar-elems"><div class="block items"><ul><li><a href="#structs">Structs</a></li></ul></div><div id="sidebar-vars" data-name="cookie" data-ty="mod" data-relpath="./"></div><script defer src="./sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Module <a href="../index.html">x11rb</a>::<wbr><a class="mod" href="#">cookie</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../src/x11rb/cookie.rs.html#1-404" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Cookies are handles to future replies or errors from the X11 server.</p>
<p>When sending a request, you get back a cookie. There are different cookies for different
kinds of requests.</p>
<p>For requests without a reply, you get a <a href="struct.VoidCookie.html" title="VoidCookie"><code>VoidCookie</code></a>. Requests with a reply are represented
by a <a href="struct.Cookie.html" title="Cookie"><code>Cookie</code></a> or a <a href="struct.CookieWithFds.html" title="CookieWithFds"><code>CookieWithFds</code></a> if the reply also contains file descriptors.
Additionally, there are two special cases for requests which generate more than one reply:
<a href="struct.ListFontsWithInfoCookie.html" title="ListFontsWithInfoCookie"><code>ListFontsWithInfoCookie</code></a> and [<code>RecordEnableContextCookie</code>].</p>
<h2 id="handling-x11-errors" class="section-header"><a href="#handling-x11-errors">Handling X11 errors</a></h2>
<p>The X11 server can answer requests with an error packet for various reasons, e.g. because an
invalid window ID was given. There are three options what can be done with errors:</p>
<ul>
<li>Errors can appear as X11 events in <code>wait_for_event()</code> (in XCB, this is called “unchecked”)</li>
<li>Errors can be checked for locally after a request was sent (in XCB, this is called “checked”)</li>
<li>Errors can be completely ignored (the closest analog in XCB would be <code>xcb_discard_reply()</code>)</li>
</ul>
<p>There is an additional difference between requests with and without replies.</p>
<h3 id="requests-without-a-reply" class="section-header"><a href="#requests-without-a-reply">Requests without a reply</a></h3>
<p>For requests that do not have a reply, you get an instance of <code>VoidCookie</code> after sending the
request. The different behaviors can be achieved via interacting with this cookie as foolows:</p>
<div><table><thead><tr><th>What?</th><th>How?</th></tr></thead><tbody>
<tr><td>Treat as events</td><td>Just drop the cookie</td></tr>
<tr><td>Check locally</td><td><code>VoidCookie::check</code></td></tr>
<tr><td>Ignore</td><td><code>VoidCookie::ignore_error</code></td></tr>
</tbody></table>
</div><h3 id="requests-with-a-reply" class="section-header"><a href="#requests-with-a-reply">Requests with a reply</a></h3>
<p>For requests with a reply, an additional option is what should happen to the reply. You can get
the reply, but any errors are still treated as events. This allows to centralise X11 error
handling a bit in case you only want to log errors.</p>
<p>The following things can be done with the <code>Cookie</code> that you get after sending a request with an
error.</p>
<div><table><thead><tr><th>Reply</th><th>Errors locally/ignored</th><th>Errors as events</th></tr></thead><tbody>
<tr><td>Get</td><td><code>Cookie::reply</code></td><td><code>Cookie::reply_unchecked</code></td></tr>
<tr><td>Ignore</td><td><code>Cookie::discard_reply_and_errors</code></td><td>Just drop the cookie</td></tr>
</tbody></table>
</div></div></details><h2 id="structs" class="section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Cookie.html" title="x11rb::cookie::Cookie struct">Cookie</a></div><div class="item-right docblock-short"><p>A handle to a response from the X11 server.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.CookieWithFds.html" title="x11rb::cookie::CookieWithFds struct">CookieWithFds</a></div><div class="item-right docblock-short"><p>A handle to a response containing <code>RawFd</code> from the X11 server.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ListFontsWithInfoCookie.html" title="x11rb::cookie::ListFontsWithInfoCookie struct">ListFontsWithInfoCookie</a></div><div class="item-right docblock-short"><p>A handle to the replies to a <code>ListFontsWithInfo</code> request.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.VoidCookie.html" title="x11rb::cookie::VoidCookie struct">VoidCookie</a></div><div class="item-right docblock-short"><p>A handle to a possible error from the X11 server.</p>
</div></div></div></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../../" data-current-crate="x11rb" data-search-index-js="../../search-index.js" data-search-js="../../search.js"></div>
    <script src="../../main.js"></script>
</body></html>